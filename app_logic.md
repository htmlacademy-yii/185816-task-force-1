---
Архитектура

---

    - services
    - controllers
    - models
    - views
    - index.php

***
Основные сущности из БД будут реализованы классами User, Task, Message... в папке Models. Унаследуют подключение к бд из базового класса. 
Запись, чтение и обновление будут методами в базовом классе, которые унаследует каждый класс сущности. 
Сзязь одних сущностей с другими будет осуществляться по внешним ключам, который можно будет получить из метода 

```$xslt
new Model()->getId....
```
***

класс Task:

    - имеет отношение один к одному с User, 
    - имеет отношение один ко многим с Comment,
    - имеет отношение один к одному с City,
    - имеет отношение один к одному с Category,
    - имеет отношение один ко многим с Response,
    - имеет отношение один к одному со Status
    
Публикация задания создает новое задание со стасусом "новое", и имеет все отношения.
У юзера с ролью заказчик, будет возможность отменить задание - тогда оно приобретет статус "отменено"

У юзера с ролью исполнитель будет возможность оставить комментарий - тогда заказчику придет уведомление о новом комментарии.
У юзера с ролью исполнитель будет возможность откликнуться на задание и указать соимость работ - тогда на эл почту заказчика придет уведомление о новом отклике.

Юзер с ролью заказчик может выбирать исполнителя и назначать его - в этом случае статус задания перейдет в "в работе" и откроется возможность переписки с исполнителем (при каждом сообщении будет приходить на почтку уведомление о новом сообщении). Исполнителю придет уведомление о том, что он назначен на задание.

Юзер с ролью исполнитель также получает возможность написать заказчику (при каждом сообщении будет приходить на почтку уведомление о новом сообщении). 

Юзер с ролью заказчик после выполнения присваивает статус заданию "выполнено или провалено", исполнителю уходит уведомление на email и записывается в экземпляр класса поле рейтинг для его обновления.  

Юзер админ имеет возможность изменить статус задания, изменить пользователя или заказчика, или удалить задания. Для непредвиденных случаев или технических сбоев.

***
класс User: 

    - имеет отношение один к одному с City,
    - имеет отношение один к одному с Role,
    - имеет отношение один к одному с UserStatus,
    - имеет отношение один ко многим с Task,
    - имеет отношение один ко многим с Comment,
    - имеет отношение один ко многим с Response
    
При регистрации юзер выбирает роль, исходя из нее ему будут доступны разные интерфейсы (заказчика или исполнителя)
Юзер с ролью админ может заблокировать пользователя, удалить его или изменить роль, а так же остальные данные. 
    
***

класс City: 

    - имеет отношение  один ко многим User,
    - имеет отношение  один ко многим Task,

Юзер с ролью админ имеет возможность добавлять, обновлять и удалять 

***

класс Category: 

    - имеет отношение  один ко многим Task,


Юзер с ролью админ имеет возможность добавлять, обновлять и удалять 

***

класс Role: 

    - имеет отношение  один ко многим User,


Юзер с ролью админ имеет возможность добавлять, обновлять и удалять 

***

класс UserStatus: 

    - имеет отношение  один ко многим User,

Определяет статус пользователя (активен, заблокирован, удален)

Юзер с ролью админ имеет возможность добавлять, обновлять и удалять

Юзер со статусом "активен" имеет право на действия определенные ролью.

Юзер со статусом "заблокирован" может просматривать контент, но не имеет возможности откликаться или добавлять заданияи комментировать. Нет возможности выбрать его исполнителем. 

Юзер со статусом "удален" не имеет возможности просматривать внутренний контент и логиниться на сайте, другие пользователи видят его как "пользователь удален". После недели, удаляются все его комментарии и отклики. Задания с удаленным пользоватетелем остаются, чтобы рейтинг не менял значения. Пользователь с таким email не сможет зарегистрироваться в приложении task-force.
 

***

класс Response: 

    - имеет отношение  один ко многим User,


Юзер с ролью админ имеет возможность обновлять юзера. добавлять, обновлять и удалять отклики 

***

класс Status: 

    - имеет отношение один ко многим Task,


Юзер с ролью админ имеет возможность добавлять, обновлять и удалять 

***

класс Comment: 

    - имеет отношение один ко многим User,


Юзер с ролью админ имеет возможность добавлять, обновлять и удалять 

***
Папка controllers будет содержать в себе php классы, каторые будт принимать на себя управляние от фронт контролеера и выполнять действие (action) согласно адресу страницы.

    Controller - раздел (класс) веб-приложения
    Action - страница раздела (метод класса контроллера) веб-приложения
    
index.php единственная входная точка приложения task-force, которая будет обрабатывать все запросы и перенаправлять на класс соответствующий запросу, если таковой есть в роутингах, в проитивном случае перенаправление на 404 или вывод ошибки.
    
***

В папке views будут храниться шаблоны представляний, лейауты и повторяющие блоки. (например сайдбар или пагинатор)

***
Папка services будет хранить в себе классы, которые отвечают за сервисные и не стандартные функции функции.

Например, в нем будет храниться абстрактный класс sendMail, который будет содержать методы для отправки писем. От кторого можно будет унаследовать класс для отправки писем с любым шаблоном, получателем и отправителем, либо вызвать методы для отправки писем с параметрами. 
```
use App/Services/SendMail;

class SendMailClient extends SendMail

```

```
SendMail::mailTo($template, $sender, $recipient);
```

Также эта папка будет содержать класс со статусами нашего проекта, от которого унаследуются методы для изменения их в экземпляре класса Task
Доступные статусы будут попадать из модели Status записываться в приватные свойства наследуемого класса. Из базового класса будут доступны методы для изменения статуса задания. 

```
use App/Services/ChangeStatus;

UpdateStatus extend ChangeStatus


$status = new UpdateStatus();
$status->update()
```
